# Monolith vs MSA

전통적 시스템 구조인 모노리스(monolith) 구조와 MSA 구조는 다음 그림과 같다.  

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FpeIR3%2FbtqSAR4mgGP%2FBnnfRzLNKhaLRngofcGdkk%2Fimg.png">

__모노리스 구조__ 는 서버 측 어플리케이션이 일체, 즉 논리적인 단일체로서 아무리 작은 변화라도 새로운 버전으로 전체를 빌드해서 배포해야 한다. 그리고 일체식 애플리케이션은 단일 프로세스에서 실행된다.  

따라서 확장이 필요한 경우, 특정 기능만 확장할 수 없고 전체 어플리케이션을 동시에 확장해야 한다. 보통 로드밸런서를 앞에 두고 여러 인스턴스 위에 큰 덩어리를 복제해 수평으로 확장한다.  

즉, 여러개의 모노리스가 수평으로 확장된 상태에서는 여러개의 모노리스를 모두 다시 빌드하고 배포해야하기 때문에 오버헤드가 굉장히 크다. 이러한 방식으로 설계했을때는 사용량 증가에는 유연하게 대처가 되지만 데이터베이스는 통합되어 하나이기 때문에 탄력적으로 대응할 수 없고, 결국 사전에 성능을 감당하기 위한 Scale Up 과정이 필요하다.  

__MSA__ 는 서버 측이 여러개의 조각으로 구성되어 각 서비스, 비즈니스 별로 별개의 인스턴스로 로딩된다. 즉, 여러 서비스 인스턴스가 모여 하나의 비즈니스 어플리케이션을 구성한다. 각기 저장소 또한 구별되어 있기에 업무 단위로 모듈 경계가 명확하게 구분된다.  

각기 서비스가 분리되어 별도의 저장소를 가지고 있기 때문에, 특정 서비스에 부하가 발생한다면 해당 서비스만 Scale Out 하면 된다.  

__SOA(Service Oriented Architecture)__ 는 컴포넌트를 모아 비즈니스적으로 의미 있고 완결적인 서비스 단위로 모듈화하는 아키텍쳐이다.  

큰 의미에서는 여러개의 응집된 비즈니스 서비스의 결합으로 시스템을 개발한다는 점에서 SOA와 MSA는 큰 차이가 없다.  

그러나 SOA는 구체적이지 않고 이론적이며 실제 비즈니스 성공 사례가 많지 않다. 반면 MSA는 클라우드 인프라 기술의 발전과 접목되어 아마존과 넷플릭스에 의해 구체화되고 비즈니스 성공사례로 많이 알려졌다. (MSA의 차별점 : 서비스별 저장소를 분리하여 캡슐화, 이를 Rest api를 이용해 접근)

```
소프트웨어 공학에서 말하는 모듈화 개념의 발전 흐름

1. 기능을 하향식으로 분해해서 설계해 나가는 구조적(Structured) 방법론
2. 객체 단위로 모듈화하기 위한 객체지향 방법론
3. 모듈화의 단위가 기능별로 재사용할 수 있는 더 큰 컴포넌트가 되는 CBD(Component Based Development)
4. 컴포넌트를 모아 비즈니스적으로 의미 있고 완결적인 서비스 단위로 모듈화 하는 SOA
```



### 출처
- https://gre-eny.tistory.com/263